<?xml version="1.0" encoding="utf-8"?>
<saw:report xmlns:saw="com.siebel.analytics.web/report/v1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sawx="com.siebel.analytics.web/expression/v1.1" xmlVersion="201201160">
  <saw:criteria xsi:type="saw:simpleCriteria" subjectArea="&quot;Property Provisioning&quot;" withinHierarchy="true">
    <saw:columns>
      <saw:column xsi:type="saw:regularColumn" columnID="c49abca1f8b26eb42">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Location&quot;.&quot;UPRN&quot;</sawx:expr>
        </saw:columnFormula>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c63e845a632b4a70a">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Location&quot;.&quot;Longitude&quot;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="suppress" wrapText="true">
            <saw:dataFormat xsi:type="saw:number" commas="false" negativeType="minus" minDigits="12" maxDigits="12"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c3cbcc11d1a836b05">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Location&quot;.&quot;Latitude&quot;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="suppress" wrapText="true">
            <saw:dataFormat xsi:type="saw:number" commas="false" negativeType="minus" minDigits="12" maxDigits="12"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c6efd3b75a9dce273">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&#39;Property Status&#39;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true"/>
        </saw:displayFormat>
        <saw:tableHeading/>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
          <saw:caption fmt="text" captionID="kcap1564723707877_41614" oldID="kcap1564723510514_11107">
            <saw:text>Type</saw:text>
          </saw:caption>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="caad61521e78c8c32">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Property Status Desc&quot;</sawx:expr>
        </saw:columnFormula>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="ca611e23dbec68635">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&#39;&lt;a target=_blank href=&quot;&#39; || VALUEOF(&quot;RV_URL_WORKFLOWDS&quot;)||&quot;Upgrade Proj Comp&quot;.&quot;Property Key&quot;||&#39;&quot;&gt;&#39; ||&quot;Upgrade Proj Comp&quot;.&quot;Property Key&quot;|| &#39;&lt;/a&gt;&#39;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true">
            <saw:dataFormat xsi:type="saw:text" textFormat="html"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:tableHeading>
          <saw:caption fmt="text" captionID="kcap1564723707877_41615" oldID="kcap1564723510514_11108">
            <saw:text>Upgrade Proj Comp</saw:text>
          </saw:caption>
        </saw:tableHeading>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
          <saw:caption fmt="text" captionID="kcap1564723707877_41616" oldID="kcap1564723510514_11109">
            <saw:text>Property Key</saw:text>
          </saw:caption>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="ccae18b8e8687e9f2">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Location&quot;.&quot;Full Property Address&quot;</sawx:expr>
        </saw:columnFormula>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c396fc4b52c05ecbc">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&#39;&lt;a target=_blank href=&quot;&#39; || VALUEOF(&quot;RV_URL_WORKFLOWDS&quot;)||&quot;Upgrade Proj Comp&quot;.&quot;Project Key&quot;||&#39;&quot;&gt;&#39; ||&quot;Upgrade Proj Comp&quot;.&quot;Project Key&quot;|| &#39;&lt;/a&gt;&#39;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true">
            <saw:dataFormat xsi:type="saw:text" textFormat="html"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:tableHeading>
          <saw:caption fmt="text" captionID="kcap1564723707877_41617" oldID="kcap1564723510514_11110">
            <saw:text>Upgrade Proj Comp</saw:text>
          </saw:caption>
        </saw:tableHeading>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
          <saw:caption fmt="text" captionID="kcap1564723707877_41618" oldID="kcap1564723510514_11111">
            <saw:text>Project Key</saw:text>
          </saw:caption>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c14d3164139deffe6">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Project Summary&quot;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true"/>
        </saw:displayFormat>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="cb9e2c4fcc8e054e8">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Project Status&quot;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true"/>
        </saw:displayFormat>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c0e787bd07042cc4d">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Bprn&quot;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="repeat" wrapText="true">
            <saw:dataFormat xsi:type="saw:number" commas="false" negativeType="minus" minDigits="0" maxDigits="0"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:tableHeading>
          <saw:caption fmt="text" captionID="kcap1564723707877_41619" oldID="kcap1564723510514_11112">
            <saw:text>Upgrade Proj Comp</saw:text>
          </saw:caption>
        </saw:tableHeading>
        <saw:columnHeading>
          <saw:caption fmt="text" captionID="kcap1564723707877_41620" oldID="kcap1564723510514_11113">
            <saw:text>BPRN</saw:text>
          </saw:caption>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c3a8e317149a0babd">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&#39;&lt;a target=_blank href=&quot;&#39; || VALUEOF(&quot;RV_URL_WORKFLOWDS&quot;)||&quot;Upgrade Proj Comp&quot;.&quot;Subtask Key&quot;||&#39;&quot;&gt;&#39; ||&quot;Upgrade Proj Comp&quot;.&quot;Subtask Key&quot;|| &#39;&lt;/a&gt;&#39;</sawx:expr>
        </saw:columnFormula>
        <saw:displayFormat>
          <saw:formatSpec suppress="suppress" wrapText="true">
            <saw:dataFormat xsi:type="saw:text" textFormat="html"/>
          </saw:formatSpec>
        </saw:displayFormat>
        <saw:tableHeading>
          <saw:caption fmt="text" captionID="kcap1564723707877_41621" oldID="kcap1564723510514_11114">
            <saw:text>Upgrade Proj Comp</saw:text>
          </saw:caption>
        </saw:tableHeading>
        <saw:columnHeading>
          <saw:displayFormat>
            <saw:formatSpec/>
          </saw:displayFormat>
          <saw:caption fmt="text" captionID="kcap1564723707877_41622" oldID="kcap1564723510514_11115">
            <saw:text>Subtask Key</saw:text>
          </saw:caption>
        </saw:columnHeading>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="cbfed9e18e57b0ae8">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Subtask Summary&quot;</sawx:expr>
        </saw:columnFormula>
      </saw:column>
      <saw:column xsi:type="saw:regularColumn" columnID="c56716bb6c55710bd">
        <saw:columnFormula>
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Subtask Status&quot;</sawx:expr>
        </saw:columnFormula>
      </saw:column>
    </saw:columns>
    <saw:filter>
      <sawx:expr xsi:type="sawx:logical" op="and">
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Management Area&quot;</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Dhf Area&quot;</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">trim(&quot;Upgrade Proj Comp&quot;.&quot;Project Summary&quot;)</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Ownership Desc&quot;</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;RNTB&quot;</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:special" op="prompted">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Component&quot;</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:comparison" op="notEqual">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Subtask Status&quot;</sawx:expr>
          <sawx:expr xsi:type="xsd:string">Cancelled</sawx:expr>
        </sawx:expr>
        <sawx:expr xsi:type="sawx:list" op="in">
          <sawx:expr xsi:type="sawx:sqlExpression">&quot;Upgrade Proj Comp&quot;.&quot;Project Key&quot;</sawx:expr>
          <sawx:expr xsi:type="sawx:sqlExpression">SELECT  &quot;Property Provisioning&quot;.&quot;Upgrade Proj Comp&quot;.&quot;Project Key&quot; s_1 FROM &quot;Property Provisioning&quot;  WHERE &quot;Upgrade Proj Comp&quot;.&quot;Prac Comp Frcst&quot; is not null  and ((case when locate(cast(case when MONTH(&quot;Upgrade Proj Comp&quot;.&quot;Prac Comp Frcst&quot;) &lt;= 6  then YEAR(&quot;Upgrade Proj Comp&quot;.&quot;Prac Comp Frcst&quot;)  else YEAR(&quot;Upgrade Proj Comp&quot;.&quot;Prac Comp Frcst&quot;) + 1 end as char(4)), REPLACE(&#39;@{v_upg_ppline_fin_yr}&#39;,&#39;,&#39;,&#39;&quot; &quot;&#39; ) || &#39;&quot;&#39;) &gt; 0 then 1 else 0 end = 1)  or &#39;@{v_upg_ppline_fin_yr}{Empty}&#39; = &#39;Empty&#39;)</sawx:expr>
        </sawx:expr>
      </sawx:expr>
    </saw:filter>
    <saw:columnOrder>
      <saw:columnOrderRef columnID="c6efd3b75a9dce273" direction="ascending"/>
      <saw:columnOrderRef columnID="cc4b0d5f4b38f0fe8" direction="ascending"/>
      <saw:columnOrderRef columnID="c396fc4b52c05ecbc" direction="ascending"/>
      <saw:columnOrderRef columnID="c182f916b79996420" direction="ascending"/>
    </saw:columnOrder>
  </saw:criteria>
  <saw:interactionOptions drill="true" movecolumns="true" sortcolumns="true" addremovevalues="false" groupoperations="false" calcitemoperations="false" showhidesubtotal="false" showhiderunningsum="false" inclexclcolumns="true"/><saw:views currentView="0" textDelivery="compoundView!1" valueHierarchyIndent="false" parentsBefore="true" includeNewColumns="true" nullSuppress="true">
    <saw:view xsi:type="saw:compoundView" name="compoundView!1">
      
    <saw:cvTable><saw:cvRow><saw:cvCell viewName="titleView!1">
            <saw:displayFormat>
              <saw:formatSpec/>
            </saw:displayFormat>
          </saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="filtersView!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!2"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="narrativeView!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="narrativeView!2"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!4"/></saw:cvRow></saw:cvTable></saw:view>
    <saw:view xsi:type="saw:titleView" name="titleView!1" includeName="true" helpUrl="https://intranet.dha.gov.au/display/BSTARC/Upgrade+Pipeline" startedDisplay="dateTime"/>
    <saw:view xsi:type="saw:htmlview" name="htmlview!1">
      <saw:viewCaption>
        <saw:caption captionID="kcap1564723707877_41599" oldID="kcap1564723510514_11092">
          <saw:text>Load JS</saw:text>
        </saw:caption>
      </saw:viewCaption>
      <saw:staticText>
        <saw:caption fmt="html" captionID="kcap1564723707877_41600" oldID="kcap1564723510514_11093">
          <saw:text>&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/BasesMappingData.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/dhf.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/jquery-migrate-1.0.0.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/jquery.qtip.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/flexigrid.pack.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/jshashtable-2.1_src.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../custom_styles/js/dha/whereis-maps/dha_mapping_obiee_whereisV2t.js&quot;&gt;&lt;/script&gt;


&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/custom_styles/s_dha/dha/whereis-maps/jquery.qtip.min.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/custom_styles/s_dha/dha/whereis-maps/flexigrid-1.1/css/flexigrid.pack.css&quot; /&gt;</saw:text>
        </saw:caption>
      </saw:staticText>
    </saw:view>
    <saw:view xsi:type="saw:htmlview" name="htmlview!2">
      <saw:viewCaption>
        <saw:caption captionID="kcap1564723707877_41601" oldID="kcap1564723510514_11094">
          <saw:text>Map Container</saw:text>
        </saw:caption>
      </saw:viewCaption>
      <saw:staticText>
        <saw:caption fmt="html" captionID="kcap1564723707877_41602" oldID="kcap1564723510514_11095">
          <saw:text>&lt;style type=&quot;text/css&quot;&gt;
#content
{
	width: 100%;
	background-color: #eee;
	clear: both;
}
#mapContainer
{
	height: 720px;
	background-color: #fff;
	border: solid 1px #888;
	clear: both;
	position: relative;
	z-index: 0;
}

.ui-tooltip .ui-tooltip-content,
.ui-tooltip p,
.ui-tooltip ul,
.ui-tooltip li,
.ui-tooltip,
.qtip {
    /*max-height: 300px;
    overflow-x: auto;
    overflow-y: auto;*/

    max-width: 1200px;
    min-width: 50px;
    font-size: 12px;
    line-height: 12px;
    text-align: center;
    border-color: #666;
}

.qtip-light .qtip-titlebar{background-color:#505050;color:#f3f3f3}

div.dhaMapLegend {
z-index:20000;
    display:block;

background-color:rgba(255,255,255,0.1);
border:1px solid #ddd;
}

.dhaLegendTable th(text-aligin:center}

&lt;/style&gt;

&lt;div id=&quot;content&quot; style=&quot;width:1500px&quot;&gt;
    &lt;div id=&quot;mapContainer&quot; class=&quot;dhaMapContainer&quot; style=&quot;float:left;width:1200px&quot; &gt;
        &lt;div id=&quot;loading&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;

         &lt;div id=&quot;dhaLegendContainer&quot; style=&quot;float:right&quot;&gt;
             &lt;div id=&quot;dhaMapLegend&quot; class=&quot;dhaMapLegend&quot; style=&quot;width:280px&quot;&gt;
             &lt;/div&gt;
&lt;a href=&#39;#&#39; onclick=&quot;	generateMarkers_init();&quot;&gt;&lt;img src=&quot;/custom_styles/s_dha/dha/refresh.png&quot; /&gt;&lt;/a&gt;
         &lt;/div&gt;

 &lt;/div&gt;</saw:text>
        </saw:caption>
      </saw:staticText>
    </saw:view>
    <saw:view xsi:type="saw:narrativeView" name="narrativeView!1">
      <saw:viewCaption>
        <saw:caption captionID="kcap1564723707877_41603" oldID="kcap1564723510514_11096">
          <saw:text>Filter By</saw:text>
        </saw:caption>
      </saw:viewCaption>
      <saw:prefix>
        <saw:caption fmt="html" captionID="kcap1564723707877_41604" oldID="kcap1564723510514_11097">
          <saw:text>&lt;script type=&quot;text/javascript&quot;&gt;</saw:text>
        </saw:caption>
      </saw:prefix>
      <saw:narrative rowCount="1">
        <saw:caption fmt="html" captionID="kcap1564723707877_41605" oldID="kcap1564723510514_11098">
          <saw:text>var filterBy=&quot;@{c6efd3b75a9dce273}&quot;;</saw:text>
        </saw:caption>
      </saw:narrative>
      <saw:postfix>
        <saw:caption fmt="html" captionID="kcap1564723707877_41606" oldID="kcap1564723510514_11099">
          <saw:text>&lt;/script&gt;</saw:text>
        </saw:caption>
      </saw:postfix>
    </saw:view>
    <saw:view xsi:type="saw:narrativeView" name="narrativeView!2">
      <saw:prefix>
        <saw:caption fmt="html" captionID="kcap1564723707877_41607" oldID="kcap1564723510514_11100">
          <saw:text>&lt;script type=&quot;text/javascript&quot;&gt;
cols = [{name:&quot;UPRN&quot;, width:50}, {name:&quot;Issue Key&quot;, width:70}, {name:&quot;Address&quot;, width:200}, {name:&quot;Property Status&quot;, width:200}];

function dhaLoaded() {
  geocoder=new EMS.Service.Geocode;
  map=new EMS.Map(&quot;mapContainer&quot;,{zoom:0,onInit:setupMap});
}

var props = [], i=0;
uniqueColHdr=&quot;Issue Key&quot;;</saw:text>
        </saw:caption>
      </saw:prefix>
      <saw:narrative rowCount="5000">
        <saw:caption fmt="html" captionID="kcap1564723707877_41608" oldID="kcap1564723510514_11101">
          <saw:text>props[i]={uprn:@{c49abca1f8b26eb42},lat:@{c3cbcc11d1a836b05},lon:@{c63e845a632b4a70a},fVal:&#39;@{caad61521e78c8c32}&#39;,uniqueCol:&#39;@{ca611e23dbec68635}&#39;, &#39;Property Status&#39;:&#39;@{caad61521e78c8c32}&#39;, &#39;Issue Key&#39;:&#39;@{ca611e23dbec68635}&#39;, Address:&#39;@{ccae18b8e8687e9f2}&#39;};i++;</saw:text>
        </saw:caption>
      </saw:narrative>
      <saw:postfix>
        <saw:caption fmt="html" captionID="kcap1564723707877_41609" oldID="kcap1564723510514_11102">
          <saw:text>var totalRowCount= i;
displayBases=false;
displayTotalsCheckbox=false;

&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.ems.sensis.com.au/v2/web/js/ems/?token=2499777234106764371&quot;&gt;&lt;/script&gt;</saw:text>
        </saw:caption>
      </saw:postfix>
    </saw:view>
    <saw:view xsi:type="saw:htmlview" name="htmlview!4">
      <saw:viewCaption>
        <saw:caption captionID="kcap1564723707877_41610" oldID="kcap1564723510514_11103">
          <saw:text>Footer</saw:text>
        </saw:caption>
      </saw:viewCaption>
      <saw:staticText>
        <saw:caption fmt="html" captionID="kcap1564723707877_41611" oldID="kcap1564723510514_11104">
          <saw:text>&lt;script type=&quot;text/javascript&quot;&gt;
 setTimeout(function(){if (typeof map == &quot;undefined&quot;) setupMap();},1000);
&lt;/script&gt;</saw:text>
        </saw:caption>
      </saw:staticText>
    </saw:view>
    <saw:view xsi:type="saw:htmlview" name="htmlview!5">
      <saw:viewCaption>
        <saw:caption captionID="kcap1564723707877_41612" oldID="kcap1564723510514_11105">
          <saw:text>Override DisplayMarkers v2</saw:text>
        </saw:caption>
      </saw:viewCaption>
      <saw:staticText>
        <saw:caption fmt="html" captionID="kcap1564723707877_41613" oldID="kcap1564723510514_11106">
          <saw:text>&lt;script type=&quot;text/javascript&quot;&gt;

function getTipTableWidth() {
    var w=0;
    for(var i=0;i&lt;cols.length;i++) {
        w += cols[i].width;
    }
    return w;
}

//now override the displayMarkers function
function displayMarkers(explodeSlice) {
	var slices = [];
	if(displayTotalsCheckbox) showTotals = document.getElementById(&#39;dhaShowTotals&#39;).checked;


	
	//if no argument supplied then default
	if(typeof explodeSlice == &quot;undefined&quot;) explodeSlice = &quot;&quot;;
	var totalForZoomLevel=0;
	
	timeoutID=0;
	for(var a=map.getExtent().asWGS84(),c=[],b=0;b&lt;markers.length;b++) {
		var e=markers[b];
		if(a.containsLonLat(e.lonlat.asWGS84())) {
			if(nx.map(function(e) { return (e.chk==true)?e.name:null; }).indexOf(e.property.fVal) &gt; -1) {
				totalForZoomLevel+=1;
				c.push(e);
			}
		}
	}

	c=(new EMS.CombinerCalculator(map.getResolution(),c)).calculateCombined();
	
	map.getLayerByName(EMS.Layer.MARKERS).clearMarkers();
	var vlayer = map.getLayerByName(&quot;vlayer&quot;)
	if(vlayer) vlayer.destroyFeatures();

	if(displayBases) {
		if(!filteredbases) {
			var selBase = document.getElementById(&#39;dhaSelBase&#39;);
			selBase.options.length=0;
			for(a=map.getExtent().asWGS84(),b=0;b&lt;baseMarkers.length;b++){
				var f=baseMarkers[b];
				if(a.containsLonLat(f.lonlat.asWGS84())) {
					var opt = document.createElement(&#39;option&#39;);
					opt.innerHTML = f.description;
					opt.value = f.description;
					selBase.appendChild(opt);
				}
			}
			selBase.selectedIndex = -1;
			filteredbases=true;
			$(&#39;select option&#39;).click(function() {
				dispBase(this.value, true);});
		}
	}
	
    var tiptablewidth = getTipTableWidth();

	for(b=0,f=0;b&lt;c.length;b++){
		a=c[b];
		e=null;
		var pPropsHashMap = new Hashtable();


        var tt=&#39;&lt;table class=&quot;scrollTable&quot; cellspacing=&quot;0&quot;&gt;&lt;thead style=&quot;font-weight:bold&quot;&gt;&lt;tr&gt;&#39;;
        for(var i=0;i&lt;cols.length;i++) {
            tt+= &#39;&lt;th width=&quot;&#39; + [cols[i].width] + &#39;&quot;&gt;&#39; + cols[i].name + &#39;&lt;/th&gt;&#39;;
        }
        tt+=&#39;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&#39;;

        if(a.combined.length &gt; 1){
            f=0;
            a.combined = a.combined.sort(compare);
            for(var n=0;n&lt;a.combined.length;n++) {
                var g=a.combined[n];
                f++;
                
                var vFilterVal = g.property.fVal;
                if(vFilterVal == &quot;&amp;nbsp;&quot;) vFilterVal = &quot;NULL&quot;;
                var icount = pPropsHashMap.get(vFilterVal);
                if( icount == null) icount = 0;
                
                pPropsHashMap.put(vFilterVal, ++icount);
                        
                if(a.combined.length&lt;101) {
                    tt+= &quot;&lt;tr&gt;&quot;;
                
                    for(var i=0;i&lt;cols.length;i++) {
                        if(cols[i].name == &quot;UPRN&quot;) {
                            tt+= &#39;&lt;td&gt;&lt;a style=&quot;color:#0000ff&quot; target=&quot;_blank&quot; href=&quot;&#39;;
                            tt+= propLink;
                            tt+= g.property.uprn + &#39;&quot;&gt;&#39; + g.property.uprn;
                            tt+= &quot;&lt;/a&gt;&lt;/td&gt;&quot;;
                        } else {
                            tt+= &quot;&lt;td&gt;&quot; + g.property[cols[i].name] + &quot;&lt;/td&gt;&quot;;
                        }
                    }
                    tt+= &quot;&lt;/tr&gt;&quot;;
                }

            }
        
            tt+= &#39;&lt;/tbody&gt;&lt;/table&gt;&#39;;
			var imgSize = calcImgSize(c.length, f, totalForZoomLevel);
			
			if(f &gt; 1) {
				e=createIconFromMap(pPropsHashMap, imgSize, explodeSlice);
				e=new EMS.Marker(a.lonlat,e);
//				e=new OpenLayers.Marker(a.lonlat,e);
				e.title=&quot;Multiple properties (&quot;+f+&quot;)&quot;;
				e.summary = createFilterString(pPropsHashMap);
				e.description = e.summary + &quot;&lt;br&gt;&quot; + (f&lt;101?tt:tooMany);
				e.hashMap = pPropsHashMap;
			}
			
			if(e != null) map.getLayerByName(EMS.Layer.MARKERS).addMarker(e);			
//			if(e != null) map.markersLayer.addMarker(e);
		} else if(a.combined.length == 1) {
			g=a.combined[0];
			pPropsHashMap.put(g.property.fVal, 1);
			var imgSize = calcImgSize(c.length, 1, totalForZoomLevel);
			e=createIconFromMap(pPropsHashMap, imgSize, explodeSlice);
			e=new EMS.Marker(g.lonlat,e);
//			e=new OpenLayers.Marker(g.lonlat,e);
			e.title=&quot;Single Property&quot;;
			e.description=&#39;&lt;a style=&quot;color:#0000ff&quot; target=&quot;_blank&quot; href=&quot;&#39; + propLink + g.property.uprn + &#39;&quot;&gt;&#39; + g.property.uprn + &quot;&lt;/a&gt;&quot; + (uniqueColHdr?&#39;&amp;nbsp&amp;nbsp&#39;+g.property.uniqueCol:&#39;&#39;)
			e.summary=e.description;
			e.hashMap = pPropsHashMap;

			if(nx.map(function(e) { return (e.chk==true)?e.name:null; }).indexOf(g.property.fVal) &gt; -1) {
				map.getLayerByName(EMS.Layer.MARKERS).addMarker(e);
//				map.markersLayer.addMarker(e);
			}
		}

	}

	var tipW = tiptablewidth + 100;
	$(map.getLayerByName(EMS.Layer.MARKERS).markers).each(
//	$(map.markersLayer.markers).each(
		function(){
			var a=$(this.icon.imageDiv);

			a.qtip({
				content:{title:{button: true, text:this.title},text:this.description},
				
				events:{
					render: function(event, api) {
						// Grab the tooltip element from the API
						var tooltip = api.elements.tooltip;
			 
						// ...and here&#39;s the extra event binds
						tooltip.bind(&#39;tooltipshow&#39;, function(event, api) {
							$(&#39;.scrollTable&#39;).flexigrid({height:100,width:tiptablewidth+70,showToggleBtn:false});
						})
					}
				},
				
				hide:false,
				show:{event:&#39;click&#39;,solo:true},
				style:{classes:&#39;qtip-light qtip-rounded tablescroll tablescroll_wrapper&#39;,width:tipW},
				position:{viewport: $(window), adjust:{method:&quot;flip&quot;}}
			})
			.removeData(&#39;qtip&#39;)
			.qtip({
						content:{title:{button: false, text:this.title},text:this.summary},
						show:{solo:!0},
						style:{classes:&#39;qtip-light qtip-rounded&#39;,width:tipW},
						position:{viewport: $(window), adjust:{method:&quot;flip&quot;}}
					});
			}
	);

	showBases();

//	for(var i=0;i&lt;map.markersLayer.markers.length;i++) {
//		if(map.markersLayer.markers[i].title == &#39;Defence Base&#39;) map.markersLayer.drawMarker(map.markersLayer.markers[i]);
//	}
	for(var i=0;i&lt;map.getLayerByName(EMS.Layer.MARKERS).markers.length;i++) {
		if(map.getLayerByName(EMS.Layer.MARKERS).markers[i].title == &#39;Defence Base&#39;) map.getLayerByName(EMS.Layer.MARKERS).drawMarker(map.getLayerByName(EMS.Layer.MARKERS).markers[i]);
	}
	
}


&lt;/script&gt;</saw:text>
        </saw:caption>
      </saw:staticText>
    </saw:view>
    <saw:view xsi:type="saw:filtersView" name="filtersView!1"/>
  <saw:view xsi:type="saw:noresultsview" name="noresultsview!1"><saw:detail><saw:caption fmt="html"><saw:text>&lt;style&gt;
p{color:grey}
,ErrorTitle{color:red;font-size:20px}
,ResultLinksCell{display:none}
&lt;/style&gt;  
&lt;p style=&quot;font-size:30px&quot;&gt;No Data found based on Selection Criteria&lt;/p&gt;</saw:text></saw:caption></saw:detail></saw:view></saw:views>
</saw:report>